---
project: lucky
stars: 6570
description: 软硬路由公网神器,ipv6/ipv4 端口转发,反向代理,DDNS,WOL,ipv4 stun内网穿透,cron,acme,rclone,ftp,webdav,filebrowser
url: https://github.com/gdy666/lucky
---

Lucky(万吉)
=========

本项目 CDN 加速及安全防护由 Tencent EdgeOne 赞助 亚洲最佳CDN、边缘和安全解决方案 - Tencent EdgeOne

注意：源码公布到1.4.10版本，后续暂无继续开源计划。
----------------------------

麻烦各位大佬发表lucky相关教程的时候不要加上“开源”神器，开源二字我不配，lucky后续也没开源打算。
-----------------------------------------------------

```
    1.开源并不等于安全，闭源并不等于不安全。闭源软件开发也会受到安全人员的审查。无论是开源还是闭源软件，都有可能会受到各种安全人员的审查和研究。安全人员可以使用各种技术手段来检测软件的安全性和漏洞。
    2. 个人观点lucky这种应用类软件更多只是体力活，毫无技术含量，开源的优势在于透明度和社区参与，更多劳动力参与，但也可能导致功能过多、复杂度增加的问题。闭源软件的优势在于我想怎么写就怎么写,即使还未能从lucky中获利，lucky对我也有更深的特殊含义。
    3. 我对lucky的规划还有一大部分未实现，不想被人当免费劳动力使唤，不解释太多，就这样。
```

如果您是第一次使用Lucky，请务必先访问 https://lucky666.cn ，并仔细阅读相关的文档，以获得必要的信息和答案。在这些文档中，您可以了解到Lucky的基本功能和特性，掌握Lucky的使用方法，以及解决常见的问题和疑惑。
-----------------------------------------------------------------------------------------------------------------------

-   Lucky(万吉)
    -   特性
        
    -   一键安装
        
    -   OpenwrtIPK包安装
        
    -   使用
        
    -   Docker中使用
        
    -   后台界面
        
    -   开发编译
        
    -   更新日志
        
    -   使用注意与常见问题
        

特性
--

Lucky最初是作为一个小工具，由开发者为自己的个人使用而开发，用于替代socat，在小米路由AX6000官方系统上实现公网IPv6转内网IPv4的功能。Lucky的设计始终致力于让更多的Linux嵌入式设备运行，以实现或集成个人用户常用功能，降低用户的硬件和软件操作学习成本，同时引导使用者注意网络安全。随着版本更新和网友反馈，Lucky不断迭代改进，拥有更多功能和更好的性能，成为用户值得信赖的工具。

Lucky 的核心程序完全采用 Golang 实现，具有高效、稳定、跨平台等优点。其后台前端则采用 Vue3.2 技术进行开发，具有良好的用户体验和响应速度。此外，Lucky 的管理后台采用前后端分离的架构，第三方开发者也可以自由使用OpenToken轻松调用Lucky的各种功能接口。

功能模块
----

目前已经实现/集成的主要功能模块有

-   端口转发
-   动态域名(DDNS)
-   Web服务
-   Stun内网穿透
-   网络唤醒
-   计划任务
-   ACME自动证书
-   网络存储

### 端口转发

1.  主要用于实现公网 IPv6 转内网 IPv4 的 TCP/UDP 端口转发。
2.  支持界面化的管理转发规则，用户可以通过 web 后台轻松地进行规则的添加、删除、修改等操作。
3.  单条转发规则支持设置多个转发端口，这样可以实现多个内网服务端口的转发。
4.  提供了一键开关和定时开关功能，用户可以根据自己的需求设置转发规则的开启和关闭时间，还可以使用计划任务模块进行定时开关。
5.  单条规则支持黑白名单安全模式切换，用户可以根据需要选择使用白名单模式或黑名单模式。
6.  白名单模式可以让没有安全验证的内网服务端口稍微安全一点暴露到公网，提高服务可用性。
7.  实时记录最新的访问日志，方便用户了解转发情况。
8.  规则列表日志一目了然，用户可以方便地追踪转发异常，及时进行排查和处理。

### 动态域名(DDNS)

1.  支持接入多个不同的 DNS 服务商。
2.  支持全功能自定义回调（Callback），包括设置 BasicAuth，方便接入任意 DNS 服务商。
3.  Webhook 支持自定义 headers。
4.  内置常用免费 DNS 服务商设置模板（每步、No-IP、Dynv6、Dynu），通过自定义回调进行快速接入，仅需修改相应用户密码或 token 即可一键填充。
5.  支持 阿里云，百度云，华为云，京东云，腾讯云，火山引擎，帝恩爱斯-DNS.LA,Cloudflare，deSEC,DNSPod.CN，DNSPod.COM，Dynadot，Dynv6，Freemyip ,GoDaddy，Name.com，NameSilo,Porkbun，Vercel等服务商。

### Web服务

1.  支持反向代理、重定向和 URL 跳转。
2.  支持 HTTP 基本认证。
3.  支持 IP 黑白名单模式。
4.  支持 UserAgent 黑白名单。
5.  规则日志清晰易懂，便于追踪异常。
6.  支持一键开关规则和定时开关规则。

### Stun内网穿透

1.  实现内网穿透，无需公网IPv4地址。
2.  适合于国内运营商级NAT1宽带网络.

### 网络唤醒

1.  支持远程控制唤醒和关机操作
2.  支持接入第三方物联网平台(点灯科技 巴法云),可通过各大平台的语音助手控制设备唤醒和关机.

### 计划任务

1.  不依赖 Linux 系统的 Cron，支持 Windows 系统。
2.  操作简便，可视化编辑。
3.  可操作控制 Lucky 框架内的其他模块开关。

### ACME自动证书

1.  支持 ACME 自动证书的申请和续签。
2.  支持 阿里云，百度云，华为云，京东云，腾讯云，火山引擎，帝恩爱斯-DNS.LA,Cloudflare，deSEC,DNSPod.CN，DNSPod.COM，Dynadot，Dynv6，Freemyip ,GoDaddy，Name.com，NameSilo,Porkbun，Vercel等服务商.

### 网络存储

1.  网络存储模块是一个应用范围广泛的模块，它提供了将本地存储、WebDAV和阿里云盘挂载到Lucky内部的各个文件类服务功能。
2.  通过网络存储模块，你可以将添加的存储挂载到Web服务的文件服务、WebDAV、FTP和FileBrowser模块，实现更加便捷的文件管理和访问。

一键安装
----

-   一键安装详看这里

OpenwrtIPK包安装
-------------

-   Openwrt IPK包

使用
--

-   默认后台管理地址 http://<运行设备IP>:16601 默认登录账号: 666 默认登录密码: 666
    
-   常规使用请用 -cd <配置文件夹路径> 指定配置文件夹的方式运行
    
    #仅指定配置文件夹路径(如果配置文件夹不存在会自动创建),建议使用绝对路径
    lucky -cd luckyconf
    

Docker中使用
---------

-   不挂载主机目录, 删除容器同时会删除配置
    
    # host模式, 同时支持IPv4/IPv6, Liunx系统推荐
    docker run -d --name lucky --restart=always --net=host gdy666/lucky
    # 桥接模式, 只支持IPv4, Mac/Windows推荐,windows 不推荐使用docker版本
    docker run -d --name lucky --restart=always -p 16601:16601 gdy666/lucky
    
-   在浏览器中打开`http://主机IP:16601`，修改你的配置，成功
    
-   \[可选\] 挂载主机目录, 删除容器后配置不会丢失。可替换 `/root/luckyconf` 为主机目录, 配置文件夹为lucky
    
    docker run -d --name lucky --restart=always --net=host -v /root/luckyconf:/goodluck gdy666/lucky
    

宝塔Docker安装
----------

1.  安装宝塔面板 (9.2.0版本及以上)，前往 宝塔面板 官网，选择正式版的脚本下载安装
2.  安装后登录宝塔面板，在菜单栏中点击 Docker ，首次进入会提示安装 Docker 服务，点击立即安装，按提示完成安装
3.  安装完成后在应用商店中找到 lucky ，点击安装，配置基本选项 即可完成安装

#开发编译

````
```bash
go build -v -tags "adminweb nomsgpack" -ldflags="-s -w"
```
````

更新日志
====

```
2025-09-30 v2.19.5
1.前端
  1.1 新增 经典主题 与 纯黑主题（无透明效果，不支持自定义背景），适合在浏览器操作时感觉卡顿的用户。
  1.2 移除弹窗旋转动画，进一步减少浏览器卡顿情况。
2.Web服务
  2.1 修复：在线测速反代面板源未使用全局 DNS 解析的问题。
  2.2 修复：子规则 IP 过滤未应用全局黑名单的问题。
  2.3 优化：单 IP 连续 404 自动拉黑次数规则，小于 10 次时统一按 10 次计算。
3. DDNS
  3.1 新增：调试模式开关，可输出更多日志，方便开发者定位问题。遇到 DDNS 卡在“正在同步”的情况时，可开启此模式并反馈日志信息。
  3.2 新增：Webhook 忽略变量开关，可在指定变量获取失败时选择不触发 Webhook。
4.计划任务
  修复：并行执行获取 IP 脚本时出现的错误。
5.  RCLONE
    更新至 1.71.1
    优化：在Filebrowser等模块内挂载 rclone 本地路径类型远端时，绕过 vfs 直接使用底层操作，提升访问性能。
6.优化全局 DNS 解析的中间层逻辑，提升稳定性。
7.Filebrowser 更新至2.44.0
8.Cloudflared 同步最新源码
9.优化域名托管商对接库核心代码，修复小概率出现的卡顿问题。
10.修复 DNS 服务器并发解析核心库中的已知异常，提升稳定性。

2025-09-15 Lucky v2.19.4 
1. FileBrowser 升级至 v2.43.0。
2. Cloudflared 同步至最新官方源码。
3. rclone 同步至最新官方源码。
4. Web 服务测速优化
    HTTPS 下载测速请求尝试禁用 TCP 连接复用。
    因为多tcp连接可以充分利用多线程 TLS 加解密处理，在硬件性能支持的情况下，提升内网 HTTPS 测速下载接近带宽极限的能力。
5. Cloudflare Tunnel 
    使用 Lucky 全局 DNS 设置解析 Edge 节点 IP，避免局域网默认 DNS 导致的解析污染问题。
```

更多日志请查看

。
